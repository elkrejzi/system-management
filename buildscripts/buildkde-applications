#!/bin/bash -e

export PKGVER=16.04.3
export MAKE_JOBS_FLAGS="-j4"
export CMAKE_BUILD=1
export KEEP_DOC=1

export CMAKE_FLAGS=(-DSYSCONF_INSTALL_DIR=/etc
                    -DKDE_INSTALL_LIBDIR=lib
                    -DBUILD_TESTING=OFF
                    -DQML_INSTALL_DIR=lib/qt5/qml
                    -DQT_PLUGIN_INSTALL_DIR=lib/qt5/plugins
                    -DECM_MKSPECS_INSTALL_DIR=/usr/lib/qt5/mkspecs/modules)

case $(basename $0) in
  buildkile )
    export PKGNAME=kile
    export PKGVER=2.1+7b238c4
  ;;
  buildkonsole )
    export PKGNAME=konsole
  ;;
  buildlibkexiv2 )
    export PKGNAME=libkexiv2
  ;;
  buildokular )
    export PKGNAME=okular
    export PKGVER=15.12.1+df0c412
  ;;
esac

export PKGTAR=${PKGNAME}-${PKGVER}.tar.xz
export DEST=/binary/plasma/${PKGNAME}-${PKGVER}
if [ -z ${PKGURL} ]
then
  export PKGURL="http://download.kde.org/stable/applications/${PKGVER}/src/${PKGTAR}"
fi

. $(dirname $0)/master.sh
